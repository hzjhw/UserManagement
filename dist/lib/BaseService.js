define("BaseService",["jquery"],function(t,e,a){var n;n=function(){return"object"==typeof n.instance?n.instance:(debug("- 创建BaseService实例"),void(n.instance=this))},n.prototype={ajax:function(t){var e=Est.extend({_method:"GET"},t);return $.ajax({type:"post",url:t.url,async:!1,data:e,success:function(){}})},initTree:function(t,e){t.tree&&(e.attributes.data=Est.bulidTreeNode(e.attributes.data,t.rootKey,t.rootValue,{categoryId:t.categoryId,belongId:t.belongId,childTag:t.childTag,sortBy:t.sortBy,callback:function(e){t.tree&&(e.text=e[t.text],e.value=e[t.value])}}))},initSelect:function(t,e){t.select&&(Est.each(e.attributes.data,function(e){e.text=e[t.text],e.value=e[t.value]}),t.tree&&(e.attributes.data=Est.bulidSelectNode(e.attributes.data,1,{name:"text"})))},initExtend:function(t,e){t.extend&&(e.attributes.data=Est.extendTree(e.attributes.data))},initDefault:function(t,e){t.default&&"array"===Est.typeOf(e.attributes.data)&&e.attributes.data.unshift({text:"请选择",value:"/"})},factory:function(t){var e=this,a=Est.promise;return t=Est.extend({select:!1,extend:!1,"default":!0,tree:!1},t),new a(function(a){e.ajax(t).done(function(n){n.attributes?(e.initTree(t,n),e.initSelect(t,n),e.initExtend(t,n)):n.attributes.data=[],e.initDefault(t,n),a(n.attributes.data)})})}},a.exports=n});