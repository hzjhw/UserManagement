define("BaseUtils",["jquery","HandlebarsHelper"],function(t,e,i){var a,o;o=t("HandlebarsHelper"),a={initSelect:function(t){var e=Est.promise;return new e(function(e){var i={},a=t.target||"#category",o=t.render||"#s1",n=t.itemId||"value",l=t.width||"150",c=t.items||[];BUI.use("bui/select",function(s){i[o]=new s.Select({render:o,valueField:a,width:l,items:c}),i[o].render(),i[o].on("change",function(i){$(a).val(Est.trim(i.item[n])),"undefined"!=typeof t.change&&t.change.call(this,i.item[n]),e(i.item[n])})})})},initTab:function(t){BUI.use(["bui/tab","bui/mask"],function(e){var i=new e.TabPanel(t);i.on("selectedchange",function(){a.resetIframe()})})},openUpload:function(t){"undefined"==typeof t&&console.error("图片上传配置不能为空"),t=Est.extend({title:"上传图片",width:650,height:350,albumId:"",padding:5,username:"",attId:"",auto:!1,replace:!1,type:"local"},t),t.url=CONST.HOST+"/modules/upload/upload.html?albumId="+t.albumId+"&username="+t.username+"&replace="+(t.replace?"01":"00")+"&attId="+t.attId+"&auto="+t.auto+"&uploadType="+t.type+"&max=",this.iframeDialog(t)},initDate:function(t){BUI.use("bui/calendar",function(e){new e.DatePicker({trigger:t.render||".calendar",showTime:t.showTime||!1,autoRender:!0})})},initCombox:function(t){var e=Est.promise;return new e(function(){var e={},i=t.target||"#category",a=t.render||"#s1",o=(t.itemId||"categoryId",t.width||"500"),n=t.items||[];BUI.use("bui/select",function(t){e[a]=new t.Combox({render:a,showTag:!0,valueField:i,elCls:"bui-tag-follow",width:o,items:n}),e[a].render()})})},initEditor:function(t){seajs.use(["xheditor"],function(){function e(t){$(t).xheditor({tools:"Preview,Fullscreen,Source,|,contact,abbccQQ,abbccMap,abbccLayout,abbccQrcode,|,Table,abbccImages,abbccFlash,Media,|,FontColor,BackColor,|,Align,Underline,Italic,Bold,|,FontSize,Fontface,|,Link,Unlink",layerShadow:2,html5Upload:!1,upBtnText:"浏览",upLinkExt:"jpg,png,bmp",upImgUrl:"/fileUpload/uploadByJson",upFlashUrl:"/fileUpload/uploadByJson",upMediaUrl:"/fileUpload/uploadByJson",upFlashExt:"swf",upMediaExt:"wmv,avi,wma,mp3,mid",linkTag:!0,internalScript:!0,inlineScript:!0})}$(function(){$(t.render||".ckeditor").each(function(){e($(this))})})})},tip:function(t,e){e=e||{time:2e3,title:"提示信息："},seajs.use(["dialog-plus"],function(i){window.tipsDialog=app.addDialog(i({id:"tip-dialog"+Est.nextUid(),title:e.title,width:200,content:t})).show(),setTimeout(function(){window.tipsDialog.close().remove()},e.time)})},tooltip:function(t,e){e=Est.extend({id:"dialog"+Est.nextUid(),content:t,time:4e3,align:"right",padding:5},e),seajs.use(["dialog-plus"],function(t){window.tooltipDialog=app.addDialog(t(e)).show(e.target),setTimeout(function(){window.tooltipDialog.close().remove()},e.time)})},comfirm:function(t){var e={title:"温馨提示：",content:"是否删除！",success:function(){},target:null};Est.extend(e,t),seajs.use(["dialog-plus"],function(t){window.comfirmDialog=app.addDialog(t({id:"dialog"+Est.nextUid(),title:e.title,content:e.content,width:150,button:[{value:"确定",autofocus:!0,callback:function(){e.success.call(this)}},{value:"取消",callback:function(){window.comfirmDialog.close().remove()}}]})).show(e.target)})},resetIframe:function(t){var e=$(document).height(),t=t||window.topDialog||window.detailDialog;t||debug("未找到需要重置高度的对话框！");try{t&&t.height&&(t.height(e),t.reset())}catch(i){console.error("【error】: BaseDetail.resetIframe"+i)}},dialog:function(t){var e=t.button||[];seajs.use(["dialog-plus"],function(i){var a={};t.success&&e.push({value:"确定",autofocus:!0,callback:function(){t.success.apply(this,arguments)}}),e.push({value:"关闭",callback:function(){this.close().remove()}}),t=Est.extend({id:"dialog"+Est.nextUid(),title:"对话框",width:150,content:"",button:e},t),t.target&&(t.target=$(t.target).get(0)),t.oniframeload=function(){this.iframeNode.contentWindow.topDialog=a,this.iframeNode.contentWindow.app=app,"function"==typeof t.load&&t.load.call(this,arguments)},a=app.addDialog(i(t)).show(t.target)})},iframeDialog:function(t){var e=[];t.success&&e.push({value:"确定",autofocus:!0,callback:function(){t.success.call(this)}}),e.push({value:"关闭",callback:function(){this.close().remove()}}),t=Est.extend({id:"dialog",title:"窗口",url:"",width:150,height:"auto",target:null,button:e},t),seajs.use(["dialog-plus"],function(e){window[t.id||"iframeDialog"]=e(t).show(t.target)})},initCopy:function(t,e){var i=this;seajs.use(["ZeroClipboard"],function(a){var o=new a($(t).get(0),{moviePath:CONST.HOST+"/swf/ZeroClipboard.swf"});o.on("ready",function(){o.on("copy",function(t){t.clipboardData.setData("text/plain",e.callback||$(t.target).attr("data-clipboard-text"))}),o.on("aftercopy",function(t){i.tip("复制成功",{time:1e3}),console.log("Copied text to clipboard: "+t.data["text/plain"]),e.success&&e.success.call(this,t.data["text/plain"])})}),o.on("error",function(t){a.destroy(),e.failed&&e.failed.call(this,t.message)})})}},i.exports=a});