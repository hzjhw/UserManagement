define("BaseService",["jquery"],function(t,e,a){var u;u={logout:function(){$.ajax({type:"GET",async:!1,url:CONST.API+"/user/logout",success:function(){window.location.href=CONST.HOST+"/modules/login/login.html"}})},getProductCategory:function(t){debug("getProductCategory");var e=Est.promise;return new e(function(a){t.select=t&&t.select?!0:!1,t.extend=t&&t.extend?!0:!1;var u=function(){return new e(function(t){$.ajax({type:"post",url:CONST.API+"/category/product?pageSize=1000",async:!1,data:{_method:"GET"},success:function(e){t(e)}})})};u().then(function(e){e.attributes?(t.tree&&(e.attributes.data=Est.bulidTreeNode(e.attributes.data,"grade","00",{categoryId:"categoryId",belongId:"belongId",childTag:"cates",sortBy:"sort",callback:function(t){t.text=t.name,t.value=t.categoryId}})),t.select&&(e.attributes.data=Est.bulidSelectNode(e.attributes.data,1,{name:"text"})),t.extend&&(e.attributes.data=Est.extendTree(e.attributes.data))):e.attributes.data=[],e.attributes.data.unshift({text:"请选择分类",value:"/"}),a(e.attributes.data)})})},getAlbumList:function(t){var e=[];return t=t||{},$.ajax({type:"post",url:CONST.API+"/album/list?pageSize=1000",async:!1,data:{_method:"GET"},success:function(a){a.attributes?(t.tree&&(a.attributes.data=Est.bulidTreeNode(a.attributes.data,"parentId",null,{categoryId:"albumId",belongId:"parentId",childTag:"cates",callback:function(t){t.text=t.name,t.value=t.albumId}})),t.select&&(a.attributes.data=Est.bulidSelectNode(a.attributes.data,1,{name:"text"})),t.extend&&(a.attributes.data=Est.extendTree(a.attributes.data))):a.attributes.data=[],a.attributes.data.unshift({text:"请选择分类",value:""}),e=a.attributes.data}}),e},getNewsCategory:function(t){return debug("getNewsCategory"),new Est.promise(function(e){t.select=t&&t.select?!0:!1,t.extend=t&&t.extend?!0:!1;var a=function(){return new Est.promise(function(t){$.ajax({type:"post",url:CONST.API+"/category/news?pageSize=1000",async:!1,data:{_method:"GET"},success:function(e){t(e)}})})};a().then(function(a){a.attributes?(a.attributes.data=Est.bulidTreeNode(a.attributes.data,"grade","01",{categoryId:"categoryId",belongId:"belongId",childTag:"cates",sortBy:"sort",callback:function(t){t.text=t.name,t.value=t.categoryId}}),t.select&&(a.attributes.data=Est.bulidSelectNode(a.attributes.data,1,{name:"text"})),t.extend&&(a.attributes.data=Est.extendTree(a.attributes.data))):a.attributes.data=[],a.attributes.data.unshift({text:"请选择分类",value:"/"}),e(a.attributes.data)})})}},a.exports=u});