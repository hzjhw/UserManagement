define("SuperView",["jquery","underscore","backbone","Utils","HandlebarsHelper"],function(t,e,i){var s,n,o,a;n=t("backbone"),o=t("Utils"),a=t("HandlebarsHelper"),s=n.View.extend({constructor:function(t){this.options=t||{},n.View.apply(this,arguments)},_navigate:function(t,e){e=e||!0,n.history.navigate(t,e)},_dialog:function(t,e){var i=e||this;t.width=t.width||700,t.cover="boolean"===Est.typeOf(t.cover)?t.cover:!0,t.button=t.button||[],("undefined"==typeof t.hideSaveBtn||"boolean"===Est.typeOf(t.hideSaveBtn)&&!t.hideSaveBtn)&&t.button.push({value:"保存",callback:function(){return this.title("正在保存..."),$("#"+t.moduleId+" #submit").click(),!1},autofocus:!0}),t=Est.extend(t,{el:"#base_item_dialog"+t.moduleId,content:'<div id="'+t.moduleId+'"></div>',viewId:t.moduleId,onshow:function(){t.onShow&&t.onShow.call(this,t),seajs.use([t.moduleId],function(e){app.addPanel(t.moduleId,{el:"#"+t.moduleId,template:'<div id="base_item_dialog'+t.moduleId+'"></div>'}).addView(t.moduleId,new e(t))})},onclose:function(){t.onClose&&t.onClose.call(i,t),app.getDialogs().pop()}}),o.dialog(t)},_modelBind:function(){var t=this;this.$("input, textarea, select").each(function(){$(this).change(function(){var e,i,s=$(this).attr("id");if(s&&-1!==s.indexOf("model")){switch(this.type){case"radio":e=$(this).is(":checked")?$(this).val():i=!0;break;case"checkbox":e=$(this).is(":checked")?Est.isEmpty($(this).attr("true-value"))?!0:$(this).attr("true-value"):Est.isEmpty($(this).attr("false-value"))?!1:$(this).attr("false-value");break;default:e=$(this).val()}i||t.model.set(s.replace(/^model\d?-(.+)$/g,"$1"),e)}})})},_stringifyJSON:function(t){var e,i;Est.each(t,function(t){e=t.split("."),e.length>1?(i=Est.getValue(this.model.toJSON(),t),Est.setValue(this.model.toJSON(),t,JSON.stringify(i))):this.model.set(t,JSON.stringify(this.model.get(t)))},this)},_parseJSON:function(t){var e,i;Est.each(t,function(t){e=t.split("."),e.length>1?(i=Est.getValue(this.model.toJSON(),t),"string"===Est.typeOf(i)&&Est.setValue(this.model.toJSON(),t,JSON.parse(i))):"string"===Est.typeOf(this.model.get(t))&&this.model.set(t,JSON.parse(this.model.get(t)))},this)},_setOption:function(t){return Est.extend(this._options,t),this},_enterEvent:function(){var t=this;this._options.enterRender&&this.$("input").keyup(function(e){e.keyCode===CONST.ENTER_KEY&&t.$(t._options.enterRender).click()})},_getOption:function(t){return this._options[t]},_getValue:function(t){return Est.getValue(this.model.attributes,t)},_setValue:function(t,e){Est.setValue(this.model.attributes,t,e)}}),i.exports=s});